<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agentic AI - by Puvinthar Stephen</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <script>
        window.API_BACKEND_URL = "{{ backend_url }}";
    </script>
    
    <div class="app-container">
        <!-- Enhanced Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="brand-container">
                    <div class="logo-wrapper">
                        <div class="logo">PS</div>
                        <div class="brand-text">
                            <span class="brand-name">Agentic AI</span>
                            <span class="developer-name">by Puvinthar Stephen</span>
                        </div>
                    </div>
                </div>
                
                <button type="button" class="new-chat-btn" onclick="newChat()" aria-label="Start new chat">
                    <svg class="icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="12" y1="5" x2="12" y2="19"></line>
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                    </svg>
                    <span>New Chat</span>
                </button>
            </div>
            
            <div class="sidebar-content">
                <div class="section-label">Recent Conversations</div>
                <div id="chatHistory" class="chat-history">
                    <!-- Chat history items will be inserted here -->
                </div>
            </div>
            
            <div class="sidebar-footer">
                <div class="status-container">
                    <div class="backend-status" id="backendStatus">
                        <span class="status-indicator"></span>
                        <span class="status-text">Connecting...</span>
                    </div>
                </div>
                <div class="developer-badge">
                    <span class="badge-icon">‚ö°</span>
                    <span class="badge-text">Powered by PS</span>
                </div>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="main-container">
            <!-- Enhanced Header -->
            <header class="app-header">
                <div class="header-left">
                    <h1 class="header-title">
                        <span class="gradient-text">Agentic AI</span>
                    </h1>
                </div>
                <div class="header-right">
                    <button type="button" class="header-btn" onclick="toggleSettings()" aria-label="Settings" title="Settings">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="3"></circle>
                            <path d="M12 1v6m0 6v6m5.2-14.8l-4.2 4.2m0 5.2l-4.2 4.2M23 12h-6m-6 0H5m14.8-5.2l-4.2 4.2m0 5.2l-4.2 4.2"></path>
                        </svg>
                    </button>
                </div>
            </header>

            <!-- Chat Display Area -->
            <div class="chat-display" id="chatDisplay">
                <!-- Welcome Screen -->
                <div class="welcome-screen">
                    <div class="welcome-content">
                        <div class="welcome-logo">
                            <div class="logo-circle">PS</div>
                        </div>
                        <h2 class="welcome-heading">What can I help with?</h2>
                        <p class="welcome-subtext">Powered by advanced AI agents for intelligent document analysis, real-time weather, meeting scheduling, and more</p>
                        
                        <!-- Capability Cards -->
                        <div class="capability-grid">
                            <button type="button" class="capability-card" onclick="quickAction('What\'s the weather in Tokyo today?')" aria-label="Get weather insights">
                                <div class="card-icon weather-icon">üå§Ô∏è</div>
                                <div class="card-content">
                                    <div class="card-title">Weather Insights</div>
                                    <div class="card-desc">Real-time weather data</div>
                                </div>
                            </button>
                            
                            <button type="button" class="capability-card" onclick="quickAction('Show my meetings today')" aria-label="View meetings">
                                <div class="card-icon meeting-icon">üìÖ</div>
                                <div class="card-content">
                                    <div class="card-title">Smart Scheduling</div>
                                    <div class="card-desc">Manage your meetings</div>
                                </div>
                            </button>
                            
                            <button type="button" class="capability-card" onclick="document.getElementById('fileInput').click()" aria-label="Upload document">
                                <div class="card-icon doc-icon">üìÑ</div>
                                <div class="card-content">
                                    <div class="card-title">Document Analysis</div>
                                    <div class="card-desc">RAG-powered insights</div>
                                </div>
                            </button>
                            
                            <button type="button" class="capability-card" onclick="toggleMeetingForm()" aria-label="Create meeting">
                                <div class="card-icon create-icon">‚ú®</div>
                                <div class="card-content">
                                    <div class="card-title">Create Meeting</div>
                                    <div class="card-desc">Schedule with weather check</div>
                                </div>
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Messages Container -->
                <div id="messageContainer" class="message-container">
                    <!-- Messages will be rendered here -->
                </div>
            </div>

            <!-- Enhanced Input Area -->
            <div class="input-area">
                <div class="input-wrapper-enhanced">
                    <input 
                        type="file" 
                        id="fileInput" 
                        accept=".pdf,.txt,.doc,.docx" 
                        onchange="handleFileUpload(event)"
                        class="file-input-hidden"
                        aria-label="Upload document file"
                        title="Upload document (PDF, TXT, DOC, DOCX)"
                    >
                    
                    <div class="input-container">
                        <button type="button" class="input-action-btn" onclick="document.getElementById('fileInput').click()" aria-label="Attach file" title="Attach file">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21.44 11.05l-9.19 9.19a6 6 0 01-8.49-8.49l9.19-9.19a4 4 0 015.66 5.66l-9.2 9.19a2 2 0 01-2.83-2.83l8.49-8.48"></path>
                            </svg>
                        </button>
                        
                        <input 
                            type="text" 
                            id="messageInput" 
                            placeholder="Ask anything..." 
                            class="message-input-enhanced"
                            onkeypress="handleKeyPress(event)"
                        >
                        
                        <button type="button" class="send-btn-enhanced" onclick="sendMessage()" aria-label="Send message" title="Send message">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"></path>
                            </svg>
                        </button>
                    </div>
                    
                    <div id="fileStatus" class="file-status-enhanced"></div>
                </div>
                
                <div class="input-footer">
                    <span class="footer-text">Agentic AI can make mistakes. Verify important information.</span>
                </div>
            </div>
        </main>
    </div>

    <!-- Meeting Modal (Enhanced) -->
    <div id="meetingModal" class="modal-overlay">
        <div class="modal-content-enhanced">
            <div class="modal-header-enhanced">
                <h2 class="modal-title">Schedule New Meeting</h2>
                <button type="button" class="modal-close-btn" onclick="toggleMeetingForm()" aria-label="Close modal" title="Close">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>
            
            <div class="modal-body-enhanced">
                <div class="form-group">
                    <label for="meetingTitle">Meeting Title</label>
                    <input type="text" id="meetingTitle" placeholder="Enter meeting title" class="form-input">
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="meetingDate">Date</label>
                        <input type="date" id="meetingDate" class="form-input">
                    </div>
                    
                    <div class="form-group">
                        <label for="meetingTime">Time</label>
                        <input type="time" id="meetingTime" class="form-input">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="meetingLocation">Location</label>
                    <input type="text" id="meetingLocation" placeholder="Enter location" class="form-input">
                </div>
                
                <div class="form-group">
                    <label for="meetingNotes">Notes (optional)</label>
                    <textarea id="meetingNotes" placeholder="Add meeting notes..." class="form-textarea" rows="3"></textarea>
                </div>
            </div>
            
            <div class="modal-footer-enhanced">
                <button type="button" class="btn-secondary" onclick="toggleMeetingForm()">Cancel</button>
                <button type="button" class="btn-primary" onclick="createMeeting()">Create Meeting</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/axios@1.6.8/dist/axios.min.js"></script>
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
